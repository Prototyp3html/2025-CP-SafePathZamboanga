================================================================================
              SAFEPATHZAMBOANGA - DATASET DOCUMENTATION
                    Capstone Project 2025
================================================================================

PROJECT: SafePathZamboanga - Flood-Aware Route Planning System
LOCATION: Zamboanga City, Philippines
DATE PREPARED: October 29, 2025
LAST DATA UPDATE: September 19, 2025 & October 26, 2025

================================================================================
                        TABLE OF CONTENTS
================================================================================
1. Dataset Overview
2. Geospatial Data Files (GeoJSON)
3. Raster Data Files (TIFF/GeoTIFF)
4. API Data Sources
5. Database Schema
6. Data Usage in Application
7. Data Sources and Attribution
8. File Specifications

================================================================================
1. DATASET OVERVIEW
================================================================================

The SafePathZamboanga system utilizes multiple geospatial datasets for 
flood-aware route planning and disaster risk analysis:

TOTAL DATASETS: 7 primary data sources
  - 3 GeoJSON files (road networks)
  - 2 GeoTIFF files (elevation & flood extent)
  - 2 Real-time API sources (weather & government bulletins)

COVERAGE AREA: Zamboanga City, Philippines
  - Latitude: 6.8°N to 7.0°N
  - Longitude: 122.0°E to 122.2°E
  - Total Area: ~1,500 sq km

================================================================================
2. GEOSPATIAL DATA FILES (GeoJSON)
================================================================================

2.1 ZCROADMAP.GEOJSON (Primary Routing Network)
--------------------------------------------------------------------------------
File Name:          zcroadmap.geojson
File Size:          7.16 MB (7,333,898 bytes)
Format:             GeoJSON (RFC 7946)
Coordinate System:  WGS 84 (EPSG:4326)
Last Modified:      October 26, 2025 (7:50 PM)

CONTENT:
  - Total Road Segments: 11,982
  - Road Types: Primary, Secondary, Tertiary, Residential, Unclassified
  - Coverage: Complete Zamboanga City road network

PROPERTIES PER FEATURE:
  ✓ osm_id          - OpenStreetMap unique identifier
  ✓ name            - Road name (if available)
  ✓ highway         - Road classification (primary/secondary/tertiary/residential)
  ✓ lanes           - Number of lanes
  ✓ surface         - Road surface type (concrete/asphalt/unpaved)
  ✓ maxspeed        - Speed limit
  ✓ oneway          - One-way street indicator
  ✓ other_tags      - Additional OSM metadata

DATA SOURCE:
  - OpenStreetMap (OSM) - Community-contributed road network
  - Downloaded via: Overpass API / BBBike Extract
  - License: Open Database License (ODbL)
  - Attribution: © OpenStreetMap contributors

USAGE IN APPLICATION:
  ✓ OSRM Routing Engine - Base routing calculations
  ✓ Local Routing Service (backend/services/local_routing.py)
  ✓ Road hierarchy analysis for route quality assessment
  ✓ Speed limit and road type for travel time estimation

FILES USING THIS DATASET:
  - backend/rebuild_osrm.py
  - backend/services/local_routing.py (get_routing_service)
  - backend/main.py (routing service initialization)
  - backend/osrm-data/*.osrm (compiled OSRM files)


2.2 TERRAIN_ROADS.GEOJSON (Flood Risk Analysis)
--------------------------------------------------------------------------------
File Name:          terrain_roads.geojson
File Size:          6.80 MB (6,967,912 bytes)
Format:             GeoJSON (RFC 7946)
Coordinate System:  WGS 84 (EPSG:4326)
Last Modified:      October 26, 2025 (7:57 PM)

CONTENT:
  - Total Road Segments: 11,675
  - Flooded Road Segments: 0 (currently no flood data marked)
  - Elevation-Enhanced Roads: All segments

PROPERTIES PER FEATURE:
  ✓ osm_id          - OpenStreetMap identifier
  ✓ name            - Road name
  ✓ highway         - Road type
  ✓ elev_mean       - Mean elevation (meters above sea level)
  ✓ elev_min        - Minimum elevation on segment
  ✓ elev_max        - Maximum elevation on segment
  ✓ flooded         - Boolean flag for flood-prone areas
  ✓ slope_gradient  - Road slope percentage
  ✓ length_m        - Segment length in meters

DATA SOURCES:
  - Base Roads: OpenStreetMap (OSM)
  - Elevation Data: Extracted from Zamboanga_DEM.tiff
  - Flood Data: Derived from Zamboanga_FloodExtent_201701.tif
  - Processing Date: September 2025
  - License: ODbL (roads) + Public Domain (elevation)

USAGE IN APPLICATION:
  ✓ Flood risk analysis for route segments
  ✓ Elevation-based route difficulty assessment
  ✓ Local routing service flood calculations
  ✓ Frontend terrain visualization
  ✓ PostGIS database import for spatial queries

FILES USING THIS DATASET:
  - backend/services/local_routing.py (get_flood_service)
  - backend/main.py (flood service initialization)
  - backend/database/import_terrain_data.py
  - frontend/src/components/MapView.tsx


2.3 OTHER GEOJSON FILES (Reference/Unused)
--------------------------------------------------------------------------------
File Name:          roadmap_zc.geojson
File Size:          5.67 KB (5,810 bytes)
Status:             UNUSED - Small test/sample file

File Name:          zamboanga_roads.geojson  
File Size:          1.07 KB (1,091 bytes)
Status:             UNUSED - Legacy/test file

File Name:          route_response.json
File Size:          3.34 KB (3,416 bytes)
Status:             UNUSED - Sample OSRM response for testing


================================================================================
3. RASTER DATA FILES (TIFF/GeoTIFF)
================================================================================

3.1 ZAMBOANGA_DEM.TIFF (Digital Elevation Model)
--------------------------------------------------------------------------------
File Name:          Zamboanga_DEM.tiff
File Size:          77.6 KB (79,475 bytes)
Format:             GeoTIFF
Coordinate System:  WGS 84 (EPSG:4326)
Last Modified:      September 19, 2025 (9:23 PM)

SPECIFICATIONS:
  - Dimensions: 2,500 x 1,351 pixels
  - Resolution: ~14m per pixel (0.000128° x 0.000127°)
  - Spatial Extent:
      West:  121.903453°E
      East:  122.224201°E
      South: 6.885238°N
      North: 7.057308°N
  - Data Type: Single band elevation data
  - Compression: DEFLATE

ELEVATION STATISTICS:
  - Coverage: Zamboanga City and surrounding areas
  - Vertical Accuracy: ±10-15 meters (typical SRTM accuracy)

DATA SOURCE:
  - Original Source: UNKNOWN (needs verification)
  - Likely Sources:
      * SRTM 1-Arc Second (~30m) - USGS
      * ASTER GDEM v3 (~30m) - NASA/METI
      * Copernicus DEM (~30m) - ESA
  - Processing: Clipped and resampled in September 2025
  - License: Public Domain (if USGS/NASA) or Free & Open (Copernicus)

USAGE IN APPLICATION:
  ❌ NOT USED AT RUNTIME - No rasterio/gdal code in active Python files
  ✓ Was used ONCE to extract elevation data for terrain_roads.geojson
  ✓ Kept as source data for thesis documentation and potential regeneration
  ✓ File is NOT loaded when application runs

IMPORTANT: This file was used during data preparation (September 2025) to 
enrich the terrain_roads.geojson file with elevation data. The application 
now uses the pre-processed terrain_roads.geojson and does NOT read TIFF files.

NOTE: Original source documentation needed for proper attribution in thesis.
Recommend checking download history from September 19, 2025.


3.2 ZAMBOANGA_FLOODEXTENT_201701.TIF (Flood Inundation Map)
--------------------------------------------------------------------------------
File Name:          Zamboanga_FloodExtent_201701.tif
File Size:          1.10 MB (1,154,415 bytes)
Format:             GeoTIFF
Coordinate System:  WGS 84 (EPSG:4326)
Last Modified:      September 19, 2025 (9:23 PM)

SPECIFICATIONS:
  - Dimensions: 3,341 x 4,454 pixels
  - Resolution: ~10m per pixel (0.0000898° x 0.0000898°)
  - Spatial Extent:
      West:  121.899947°E
      East:  122.200074°E
      South: 6.799977°N
      North: 7.200087°N
  - Band Description: "VV" (Sentinel-1 SAR VV polarization)
  - Data Type: Single band

FLOOD EVENT DETAILS:
  - Date: January 2017
  - Context: Tropical Storm Vinta (International: Tembin)
  - Disaster: Struck Mindanao in December 2016, caused flooding in
              Zamboanga Peninsula in early January 2017
  - Casualties: Significant flooding and landslides across region

DATA SOURCE (CONFIRMED):
  - Satellite: Sentinel-1A or Sentinel-1B
  - Sensor: C-band Synthetic Aperture Radar (SAR)
  - Polarization: VV (Vertical-Vertical)
  - Resolution: ~10 meters
  - Provider: European Space Agency (ESA) Copernicus Programme
  - Downloaded From: Copernicus Open Access Hub (scihub.copernicus.eu)
  - Processing Date: September 19, 2025
  - License: Free and Open - Attribution required
  - Attribution: "Contains modified Copernicus Sentinel data 2017"

USAGE IN APPLICATION:
  ❌ NOT USED AT RUNTIME - No rasterio/gdal code in active Python files
  ✓ Was used ONCE to mark flooded roads in terrain_roads.geojson
  ✓ Kept as source data for thesis documentation and potential regeneration
  ✓ File is NOT loaded when application runs

IMPORTANT: This file was used during data preparation (September 2025) to 
identify flood-prone roads. The application now uses the pre-processed 
terrain_roads.geojson and does NOT read TIFF files.

NOTE: Analysis shows 0 roads currently marked as flooded in terrain_roads.geojson.
You may need to reprocess this data to properly mark flood-prone segments.

CITATION FOR THESIS:
  European Space Agency (2017). Sentinel-1 SAR imagery, VV polarization,
  acquired January 2017. Accessed via Copernicus Open Access Hub
  (https://scihub.copernicus.eu/). Processed September 2025 for
  SafePathZamboanga flood risk analysis.


================================================================================
4. API DATA SOURCES (REAL-TIME)
================================================================================

4.1 WEATHERAPI.COM (Weather Conditions)
--------------------------------------------------------------------------------
Service:            WeatherAPI.com
API Type:           REST API
Endpoint:           https://api.weatherapi.com/v1/current.json
API Key:            11b60f9fe8df4418a12152441251310
Plan:               Free Tier

SPECIFICATIONS:
  - Update Frequency: Every API call (real-time)
  - Location: Zamboanga City (6.9°N, 122.1°E)
  - Rate Limit: 1 million calls/month (Free tier)
  - Data Includes:
      * Current temperature (°C)
      * Precipitation (mm)
      * Humidity (%)
      * Wind speed (km/h)
      * Weather conditions
      * Cloud cover
      * Feels like temperature

USAGE IN APPLICATION:
  ✓ Real-time weather display in dashboard
  ✓ Dynamic flood risk adjustment based on rainfall
  ✓ Route planning weather context
  ✓ Weather-based travel advisories
  ✓ Weather news feed updates

IMPLEMENTATION:
  - Backend Function: fetch_zamboanga_weather() in backend/main.py
  - Frontend Component: WeatherDashboard component
  - Update Interval: On-demand per user request
  - Fallback: Safe defaults if API unavailable

LICENSE:
  - Free for non-commercial/educational use
  - Attribution recommended but not required
  - Terms: https://www.weatherapi.com/terms.aspx

CITATION:
  WeatherAPI.com (2025). Current weather data for Zamboanga City, Philippines.
  Retrieved October 2025 from https://www.weatherapi.com/


4.2 PAGASA OFFICIAL BULLETINS (Government Weather Advisories)
--------------------------------------------------------------------------------
Service:            PAGASA (Philippine Atmospheric, Geophysical and
                    Astronomical Services Administration)
Source:             https://www.pagasa.dost.gov.ph/
Data Type:          Web scraping of official bulletins
Update Frequency:   As posted by PAGASA (typically daily)

CONTENT TYPES:
  ✓ Typhoon bulletins and tropical cyclone information
  ✓ Rainfall advisories and warnings
  ✓ Flood advisories
  ✓ General weather advisories
  ✓ Severe weather warnings

USAGE IN APPLICATION:
  ✓ Official government weather alerts display
  ✓ High-priority weather warnings
  ✓ Regional weather bulletins for Zamboanga
  ✓ Disaster preparedness information

IMPLEMENTATION:
  - Backend Endpoint: GET /api/pagasa/bulletins
  - Scraping Function: Custom web scraper in backend/main.py
  - Frontend: Alerts page weather news feed
  - Fallback: System continues with WeatherAPI if PAGASA unavailable

LICENSE:
  - Public government information
  - Free for educational/public use
  - Attribution required

CITATION:
  Philippine Atmospheric, Geophysical and Astronomical Services Administration
  (PAGASA). (2025). Official weather bulletins and advisories. Department of
  Science and Technology. Retrieved from https://www.pagasa.dost.gov.ph/


================================================================================
5. DATABASE SCHEMA
================================================================================

DATABASE: PostgreSQL with PostGIS extension
Database Name: safepathzc
User: safepathzc_user

TABLES:
  1. users              - User accounts and authentication
  2. admin_users        - Administrator accounts
  3. route_history      - User route travel history
  4. favorite_routes    - Saved favorite routes
  5. search_history     - Route search queries
  6. reports            - User-submitted incident reports
  7. forum_posts        - Community forum discussions
  8. roads              - PostGIS spatial road data (optional)
  9. roads_network      - Routing network edges (optional)
  10. roads_vertices_pgr - Graph vertices for routing (optional)

SPATIAL DATA:
  - roads table: Contains terrain_roads.geojson data
  - Spatial indexing: GIST indexes for fast spatial queries
  - Routing: pgRouting extension for alternative routing


================================================================================
6. DATA USAGE IN APPLICATION
================================================================================

FRONTEND (React + TypeScript + Vite)
--------------------------------------------------------------------------------
Location: SafePathZC/frontend/

DATA CONSUMPTION:
  ✓ terrain_roads.geojson - Loaded from /public/data/ for map visualization
  ✓ WeatherAPI.com - Via backend proxy (frontend env: VITE_WEATHER_API_KEY)
  ✓ PAGASA bulletins - Via backend API
  ✓ Route data - Via backend API calls

KEY COMPONENTS:
  - MapView.tsx: Map rendering with road networks
  - WeatherDashboard: Real-time weather display
  - Alerts.tsx: PAGASA bulletins and weather alerts
  - RoutePanel: Route planning interface

FILES:
  - frontend/src/components/MapView.tsx
  - frontend/src/components/WeatherDashboard.tsx
  - frontend/src/pages/Alerts.tsx


BACKEND (FastAPI + Python)
--------------------------------------------------------------------------------
Location: SafePathZC/backend/

DATA PROCESSING:
  ✓ zcroadmap.geojson - Loaded by OSRM routing engine
  ✓ terrain_roads.geojson - Loaded for flood analysis
  ✓ OSRM compiled data - Pre-processed routing graphs
  ✓ WeatherAPI.com - Real-time API calls
  ✓ PAGASA website - Web scraping

KEY SERVICES:
  - services/local_routing.py: Routing with flood awareness
  - main.py: API endpoints and weather integration
  - routes/flood_routing.py: Specialized flood-safe routing
  - database/import_terrain_data.py: PostGIS data import

OSRM (Open Source Routing Machine)
--------------------------------------------------------------------------------
Location: SafePathZC/backend/osrm-data/

DATA:
  ✓ zamboanga_roads.osm - Converted from zcroadmap.geojson
  ✓ zamboanga_roads.osrm* - Compiled routing files
  ✓ Algorithm: Contraction Hierarchies (CH)
  ✓ Docker containers: osrm-driving (port 5000), osrm-walking (port 5001)


================================================================================
7. DATA SOURCES AND ATTRIBUTION
================================================================================

GEOSPATIAL DATA:
--------------------------------------------------------------------------------
OpenStreetMap
  - Roads: zcroadmap.geojson, terrain_roads.geojson (base)
  - License: Open Database License (ODbL)
  - Attribution: © OpenStreetMap contributors
  - Website: https://www.openstreetmap.org/
  - Download: https://overpass-turbo.eu/ or https://extract.bbbike.org/

Sentinel-1 SAR (ESA Copernicus)
  - Flood: Zamboanga_FloodExtent_201701.tif
  - License: Free and Open
  - Attribution: Contains modified Copernicus Sentinel data 2017
  - Website: https://scihub.copernicus.eu/
  - Citation Required: Yes

Digital Elevation Model (Source TBD)
  - File: Zamboanga_DEM.tiff
  - Likely Source: SRTM (USGS) or Copernicus DEM
  - License: Public Domain (if USGS) or Free & Open (if Copernicus)
  - Recommended Citation: Check original source
  - Websites:
      * USGS: https://earthexplorer.usgs.gov/
      * Copernicus: https://spacedata.copernicus.eu/


WEATHER & ADVISORY DATA:
--------------------------------------------------------------------------------
WeatherAPI.com
  - Real-time weather conditions
  - License: Free for educational use
  - Attribution: Recommended
  - Website: https://www.weatherapi.com/
  - Terms: https://www.weatherapi.com/terms.aspx

PAGASA (Philippine Government)
  - Official weather bulletins and advisories
  - License: Public government information
  - Attribution: Required
  - Website: https://www.pagasa.dost.gov.ph/
  - Citation: Philippine Atmospheric, Geophysical and Astronomical
              Services Administration (PAGASA), Department of Science
              and Technology, Philippines


================================================================================
8. FILE SPECIFICATIONS SUMMARY
================================================================================

DATASET INVENTORY:
--------------------------------------------------------------------------------
File Name                           Size (MB)  Type      Status         Purpose
---------------------------------------------------------------------------
zcroadmap.geojson                     7.16     GeoJSON   ✓ RUNTIME      OSRM Routing
terrain_roads.geojson                 6.80     GeoJSON   ✓ RUNTIME      Flood Analysis
Zamboanga_DEM.tiff                    0.08     GeoTIFF   📁 SOURCE      Elevation Source*
Zamboanga_FloodExtent_201701.tif      1.10     GeoTIFF   📁 SOURCE      Flood Source*
roadmap_zc.geojson                    0.01     GeoJSON   ✗ UNUSED       Test/Sample
zamboanga_roads.geojson               0.001    GeoJSON   ✗ UNUSED       Legacy
route_response.json                   0.003    JSON      ✗ UNUSED       Test Sample
---------------------------------------------------------------------------
RUNTIME DATA:                         13.96 MB (only 2 files actively used)
SOURCE DATA:                           1.18 MB (kept for documentation)
UNUSED DATA:                           0.01 MB (can be deleted)

* SOURCE files: Used once to create terrain_roads.geojson, not loaded at runtime

API SOURCES (Real-time):
  ✓ WeatherAPI.com - Weather conditions
  ✓ PAGASA - Government advisories


COORDINATE SYSTEMS:
--------------------------------------------------------------------------------
All geospatial data uses: WGS 84 (EPSG:4326)
  - Latitude/Longitude in decimal degrees
  - Coordinate order: [longitude, latitude]


DATA QUALITY:
--------------------------------------------------------------------------------
✓ Road Network Coverage: Complete for Zamboanga City
✓ Elevation Data: High quality, ~14m resolution
✓ Flood Mapping: SAR-based, 10m resolution, historical event
✓ Weather Data: Real-time, professional API service

❌ CRITICAL FINDING: TIFF Files Not Used at Runtime
   - Zamboanga_DEM.tiff and Zamboanga_FloodExtent_201701.tif are NOT loaded
   - No rasterio, gdal, or TIFF-reading code found in active Python files
   - These were used ONCE to create terrain_roads.geojson in September 2025
   - Application runs entirely on pre-processed GeoJSON files

❌ Flood Flags Not Set: Currently 0 roads marked as flooded in terrain_roads.geojson
   - Needs processing/update from FloodExtent raster OR manual marking
   - Flood analysis may not be working as intended
   - Recommend reprocessing flood data or verifying flood flag logic


================================================================================
9. RECOMMENDATIONS FOR THESIS DOCUMENTATION
================================================================================

REQUIRED ACTIONS:
1. ✓ Verify DEM source - Check download history from Sept 19, 2025
2. ✓ Document Sentinel-1 scene ID if available
3. ✓ Create proper citations for all data sources
4. ✓ Include attribution in thesis acknowledgments
5. ✓ Process FloodExtent raster to update terrain_roads flood flags

SUGGESTED THESIS SECTIONS:

Chapter 3: Methodology - Data Collection
  3.1 Geospatial Datasets
      3.1.1 Road Network Data (OpenStreetMap)
      3.1.2 Digital Elevation Model
      3.1.3 Flood Extent Mapping (Sentinel-1 SAR)
  3.2 Real-time Data Integration
      3.2.1 Weather API Integration
      3.2.2 Government Advisory System (PAGASA)
  3.3 Data Processing and Integration
      3.3.1 GeoJSON Processing
      3.3.2 Raster Data Analysis
      3.3.3 Flood Risk Computation

Appendices:
  Appendix A: Dataset Specifications
  Appendix B: Data Attribution and Licenses
  Appendix C: API Documentation


SAMPLE CITATIONS:

OpenStreetMap Contributors. (2025). Zamboanga City road network data.
  OpenStreetMap Foundation. Retrieved October 2025 from
  https://www.openstreetmap.org/. Licensed under Open Database License.

European Space Agency. (2017). Sentinel-1 SAR imagery (VV polarization)
  of Zamboanga Peninsula flood event, January 2017. Copernicus Programme.
  Retrieved September 2025 from https://scihub.copernicus.eu/.

WeatherAPI.com. (2025). Real-time weather data for Zamboanga City,
  Philippines. Retrieved October 2025 from https://www.weatherapi.com/.

Philippine Atmospheric, Geophysical and Astronomical Services Administration.
  (2025). Official weather bulletins and flood advisories. Department of
  Science and Technology, Republic of the Philippines. Retrieved from
  https://www.pagasa.dost.gov.ph/.


================================================================================
                            END OF DOCUMENT
================================================================================

Document Version: 1.0
Date: October 29, 2025
Prepared for: SafePathZamboanga Capstone Project
Institution: [Your University Name]
Team: [Your Team Name]

For questions or clarifications, refer to:
- Technical documentation: SafePathZC/DATA_SOURCES.md
- System configuration: SafePathZC/FINAL_SYSTEM_CONFIGURATION.md
- Weather integration: SafePathZC/WEATHER_IMPLEMENTATION_SUMMARY.md

================================================================================
